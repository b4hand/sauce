// -*- C++ -*-
#ifndef SAUCE_SAUCE_INTERNAL_DISPOSAL_H_
#define SAUCE_SAUCE_INTERNAL_DISPOSAL_H_

namespace sauce {
namespace internal {

/**
 * A smart pointer deleter that disposes of its pointer with a given Injector.
 *
 * It is an invariant that no Deleter survives its associated Injector.
 */
template<typename Injector, typename Disposer>
class Deleter {
  Injector const & injector;
  Disposer disposer;

public:
  Deleter(Injector const & injector, Disposer disposer):
    injector(injector),
    disposer(disposer) {}

  template<typename Iface>
  void operator()(Iface * iface) const {
    disposer(injector, iface);
  }
};

}
}

#endif // SAUCE_SAUCE_INTERNAL_DISPOSAL_H_