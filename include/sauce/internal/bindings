// -*- C++ -*-
#ifndef SAUCE_SAUCE_INTERNAL_BINDINGS_H_
#define SAUCE_SAUCE_INTERNAL_BINDINGS_H_

#include <sauce/internal/generated_bindings>

namespace sauce {
namespace internal {
namespace bindings {

template<typename Injector>
class Binding {
  typedef typename Injector::NewDelete NewDelete;

protected:
  static NewDelete & newDelete(Injector & injector) {
    return injector.newDelete;
  }
};

template<typename Injector, typename Iface>
class Dereference:
  public Binding<Injector> {
public:
  static Iface & provide(Injector & injector) {
    return *injector.template provide<Iface *>();
  }

  static void dispose(Injector & injector, Iface & iface) {
    injector.template dispose<Iface *>(&iface);
  }
};

}
}
}

#endif // ifndef SAUCE_SAUCE_INTERNAL_BINDINGS_H_